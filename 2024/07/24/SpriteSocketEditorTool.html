<!--
 * page.banner: url to pass as background image
 * page.color: configured color in tailwindcss config file
 * page.title: title of the page (displayed in the banner)
 * page.author: author of the page
 * page.date: date of the page
 -->
 <!DOCTYPE html>
 <html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0 minimum-scale=1" charset="UTF-8">
	<title></title>
	<link rel="stylesheet" href="/assets/css/main.css">
	<link rel="stylesheet" href="/assets/css/markdown.css">
</head>
<body>
    <div id="post_backdrop" class="fixed top-0 left-0 w-screen h-[100svh] z-[-10] blur-sm"></div>
    <!--
Change class "fixed" to "sticky" in "navbar" (l. 33) so the navbar doesn't hide any of your page content!
-->

<style>
    ul {
        margin-left: 0px;
        padding-left: 0px;
        list-style-type: none;
    }

    ul.breadcrumb li+li::before {
        content: "\276F";
        padding-left: 8px;
        padding-right: 4px;
        color: inherit;
        list-style-type: circle;
    }

    ul.breadcrumb li span {
        opacity: 60%;
    }

    #sidebar {
        -webkit-transition: all 300ms cubic-bezier(0, 0.77, 0.58, 1);
        transition: all 300ms cubic-bezier(0, 0.77, 0.58, 1);
    }

    #sidebar.show {
        transform: translateX(0);
    }

    #sidebar ul li a.active {
        background: #1f2937;
        background-color: #1f2937;
    }
</style>

<!-- Close Navbar -->
<div class="fixed w-screen h-[100svh]" id="navExit"></div>

<!-- Navbar start -->
<nav id="navbar" class="fixed top-0 z-[60] px-4 sm:justify-between">
    <button id="btnSidebarToggler" type="button" class="py-4 text-2xl text-white hover:text-gray-200 bg-transparent">
        <svg id="navClosed" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="h-8 w-8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
        <svg id="navOpen" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="hidden h-8 w-8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
    </button>
</nav>
<!-- Navbar end -->

<!-- Sidebar start-->
<div id="containerSidebar" class="fixed top-0 z-[55]">
    <div class="navbar-menu fixed top-0 z-40">
        <nav id="sidebar"
            class="fixed top-0 left-0 bottom-0 flex w-3/4 -translate-x-full flex-col overflow-y-auto bg-dark-gray pt-0 pb-8 sm:max-w-xs lg:w-80">
            
            <!-- one category / navigation group -->
            <div class="px-4 pb-6 pt-14">
                <ul class="mb-8 text-xl">
                    <li>
                        <a id="home" class="flex items-center rounded py-3 pl-3 pr-4 text-gray-50 hover:bg-gray-600 no-underline"
                            href="/">
                            <span class="select-none">Home</span>
                        </a>
                    </li>
                    <li>
                        <a id="devlog" class="flex items-center rounded py-3 pl-3 pr-4 text-gray-50 hover:bg-gray-600 no-underline"
                            href="/DevLog">
                            <span class="select-none">DevLog</span>
                        </a>
                    </li>
                    <li>
                        <a id="work" class="flex items-center rounded py-3 pl-3 pr-4 text-gray-50 hover:bg-gray-600 no-underline"
                            href="/WorkExperience">
                            <span class="select-none">Work Experience</span>
                        </a>
                    </li>
                    <li>
                        <a id="projects" class="flex items-center rounded py-3 pl-3 pr-4 text-gray-50 hover:bg-gray-600 no-underline"
                            href="/Projects">
                            <span class="select-none">Projects</span>
                        </a>
                        <ul class="ml-4 mb-8 text-sm">
                            <li>
                                <a id="games" class="flex items-center rounded py-3 pl-3 pr-4 text-gray-50 hover:bg-gray-600 no-underline"
                                    href="/AppsGames">
                                    <span class="select-none">Apps & Games</span>
                                </a>
                            </li>
                            <li>
                                <a id="graphics" class="flex items-center rounded py-3 pl-3 pr-4 text-gray-50 hover:bg-gray-600 no-underline"
                                    href="/GraphicsProjects">
                                    <span class="select-none">Graphics Projects</span>
                                </a>
                            </li>
                            <li>
                                <a id="personal" class="flex items-center rounded py-3 pl-3 pr-4 text-gray-50 hover:bg-gray-600 no-underline"
                                    href="/PersonalProjects">
                                    <span class="select-none">Personal Projects</span>
                                </a>
                            </li>
                            <li>
                                <a id="academic" class="flex items-center rounded py-3 pl-3 pr-4 text-gray-50 hover:bg-gray-600 no-underline"
                                    href="/AcademicProjects">
                                    <span class="select-none">Academic Projects</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- navigation group end-->

            <div class="absolute bottom-0 px-6 mx-auto pb-4 mb-0 flex flex-col">
                
                <div class="z-45 mx-auto pb-0 mb-0 mt-3 md:mt-0 flex flex-col">
                    <a href="/assets/docs/SillimanZachary_Resume.pdf" target="_blank" class="relative flex-none items-center justify-center p-0.5 mb-2 me-2 mr-4 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-purple-600 to-blue-500 group-hover:from-purple-600 group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800">
                        <div class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0 flex flex-row">
                            <svg class="w-4 h-4 me-2 mt-[2px]" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="8 8 40 40">
                                <path fill="#90CAF9" d="M40 45L8 45 8 3 30 3 40 13z"></path><path fill="#E1F5FE" d="M38.5 14L29 14 29 4.5z"></path><path fill="#1976D2" d="M16 21H33V23H16zM16 25H29V27H16zM16 29H33V31H16zM16 33H29V35H16z"></path>
                            </svg>
                            Resume
                        </div>
                    </a>
                    <a href="https://github.com/zsilliman" target="_blank" class="relative flex-none items-center justify-center p-0.5 mb-2 me-2 mr-4 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-purple-600 to-blue-500 group-hover:from-purple-600 group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800">
                        <div class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0 flex flex-row"></span>
                            <svg class="w-4 h-4 me-2 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z" clip-rule="evenodd"/>
                            </svg>
                            Github
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/in/zach-silliman-9655b624a/" target="_blank" class="relative  flex-none items-center justify-center p-0.5 mb-2 me-2 mr-4 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-purple-600 to-blue-500 group-hover:from-purple-600 group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800">
                        <div class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0 flex flex-row"></span>
                            <svg class="w-4 h-4 me-2 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72">
                                <g fill="none" fill-rule="evenodd"><path fill="#007EBB" d="M8 72h56a8 8 0 0 0 8-8V8a8 8 0 0 0-8-8H8a8 8 0 0 0-8 8v56a8 8 0 0 0 8 8Z"/><path fill="#FFF" d="M62 62H51.316V43.802c0-4.99-1.896-7.777-5.845-7.777-4.296 0-6.54 2.901-6.54 7.777V62H28.632V27.333H38.93v4.67s3.096-5.729 10.453-5.729c7.353 0 12.617 4.49 12.617 13.777V62ZM16.35 22.794c-3.508 0-6.35-2.864-6.35-6.397C10 12.864 12.842 10 16.35 10c3.507 0 6.347 2.864 6.347 6.397 0 3.533-2.84 6.397-6.348 6.397ZM11.032 62h10.736V27.333H11.033V62Z"/></g>
                            </svg>
                            LinkedIn
                        </div>
                    </a>
                </div>

            </div>
        </nav>
    </div>
    <div class="mx-auto lg:ml-80"></div>
</div>
<!-- Sidebar end -->

<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", () => {
        const navbar = document.getElementById("navbar");
        const sidebar = document.getElementById("sidebar");
        const btnSidebarToggler = document.getElementById("btnSidebarToggler");
        const navClosed = document.getElementById("navClosed");
        const navOpen = document.getElementById("navOpen");
        const navExit = document.getElementById("navExit");

        const pathname = document.location.pathname.toLowerCase();
        if (pathname === "/" || pathname.includes("index")) {
            document.getElementById("home").classList.add("active");
        } else if (pathname.includes("dev")) {
            document.getElementById("devlog").classList.add("active");
        } else if (pathname.includes("work")) {
            document.getElementById("work").classList.add("active");
        } else if (pathname.includes("games")) {
            document.getElementById("games").classList.add("active");
        } else if (pathname.includes("graphics")) {
            document.getElementById("graphics").classList.add("active");
        } else if (pathname.includes("personal")) {
            document.getElementById("personal").classList.add("active");
        } else if (pathname.includes("academic")) {
            document.getElementById("academic").classList.add("active");
        } else if (pathname.includes("projects")) {
            document.getElementById("projects").classList.add("active");
        } 

        sidebar.addEventListener("mouseleave", (e) => {
            sidebar.classList.toggle("show");
            navClosed.classList.toggle("hidden");
            navOpen.classList.toggle("hidden");
            navExit.classList.toggle("z-40");
        });

        btnSidebarToggler.addEventListener("click", (e) => {
            e.preventDefault();
            sidebar.classList.toggle("show");
            navClosed.classList.toggle("hidden");
            navOpen.classList.toggle("hidden");
            navExit.classList.toggle("z-40");
        });

        navExit.addEventListener("click", (e) => {
            if (sidebar.classList.contains("show")) {
                sidebar.classList.remove("show");
                navOpen.classList.remove("hidden");
                navOpen.classList.add("hidden");
                navClosed.classList.remove("hidden");
                navExit.classList.remove("z-40");
            }
            
        });
    });
</script>
	<div class="z-10 flex flex-col overflow-x-hidden scrollbar-hide w-screen h-auto">
        <div class="z-10 w-screen h-80 bg-cover flex justify-center items-center bg-center" style="background-image: url('/assets/posts/sprite-socket-editor-tool/socket-editor-banner.png');">
            <div class="w-auto h-auto font-mono flex flex-col justify-center items-center p-10 text-gray-100">
                <h1 class="text-6xl mt-0 pt-0 tracking-wide"><b>Sprite Socket Editor Tool</b></h1>
            </div>
        </div>
        <div class="font-mono mx-auto my-0 w-screen md:w-3/4 h-auto py-8 md:py-24 px-4 md:px-24 bg-dark-gray drop-shadow-2xl shadow-lg text-gray-50">
            <p class="my-4 md:my-0 mr-4 md:mr-0 md:absolute md:top-4 md:right-8 italic text-gray-400">  posted by <span class="text-gray-100">Zachary Silliman</span>  on <span class="text-gray-100">July 24, 2024</span></p>
            <div class="w-full h-auto flex justify-center items-center my-6 mx-0">
    <video class="w-full md:w-3/4 aspect-auto" src="/assets/posts/sprite-socket-editor-tool/animated-sprite-preview.mp4" frameborder="0" allowfullscreen="" controls="" autoplay="" loop="" muted=""></video>
</div>

<p>Throughout the process of making a game, the need to create custom tools to solve problems is constantly arising. In this post I talk about solving the problem of attaching equipment to spritesheet-based characters. Unlike armature-based/rigged characters, spritesheets do not have well-defined transformable sockets. To attach objects to a character, I created this Sprite Socket Editor tool. This allows a creative to set positions, rotations and sorting offsets for sockets on a per-frame basis.</p>

<!--more-->

<p>All the data created in the editor is assigned to a specific scriptable object so different characters can have different assets, keeping the project organized.</p>

<div class="w-full h-auto flex justify-center items-center my-6 mx-0">
    <img class="w-full  md:w-3/4 aspect-auto" src="/assets/posts/sprite-socket-editor-tool/editor-labelled.png" />
</div>

<p>Above is the editor interface.</p>

<p class="ml-6"><span class="text-red-700">#1</span> is where you select which scriptable object you want to edit.</p>
<p class="ml-6"><span class="text-red-700">#2</span> is the list of all the sprite frames that are associated with the scriptable object. They can be separated into any number of spritesheets.</p>
<p class="ml-6"><span class="text-red-700">#3</span> is where the user can edit and visualize the positions and rotations of each socket on the character
With #4, the user can easily copy and paste between frames for a much faster workflow.</p>
<p class="ml-6"><span class="text-red-700">#4</span>, the lower portion of the editor, contains all the details of each socket. This includes socket UVs, rotation (degrees), render sorting order offset, enabled/disabled, and ignore flip.</p>
<p><br />
Here is a short video demonstrating basic usage:</p>

<div class="w-full h-auto flex justify-center items-center my-6 mx-0">
    <video class="w-full md:w-3/4 aspect-auto" src="/assets/posts/sprite-socket-editor-tool/editor-use-demo.mp4" frameborder="0" allowfullscreen="" controls="" autoplay="" loop="" muted=""></video>
</div>

<p>The interactions with the editor are meant to be easy to visualize and intuitive to edit. The user can simply drag socket handles to where they belong on the character’s sprite. They can then orient the handle to align with the character’s body part.</p>

<div class="w-full h-auto flex justify-center items-center my-6 mx-0">
    <img class="w-full  md:w-[1/2] aspect-auto" src="/assets/posts/sprite-socket-editor-tool/editor-close-up.png" />
</div>

<h2 id="problems-with-sprite-flip">Problems with Sprite Flip</h2>
<p>A few important problems arise after mapping sockets to each frame of a character. First, we need to make sure that we maintain the correct rotation when the sprite is flipped. As seen in the below screenshot, the flipped sprite (left) doesn’t look right because the rotations on the socket do not match the flipped sprite. Turns out this is very easy to solve, we simply multiply the socket’s offset rotation by -1. (Also note that the equipment sprite flip is being set to match the character’s sprite flip. This can be ignored with the ignore flip toggle).</p>

<div class="w-full h-auto flex justify-center items-center my-6 mx-0">
    <img class="w-full  md:w-96 aspect-auto" src="/assets/posts/sprite-socket-editor-tool/flip-issue-0.png" />
</div>

<p>Below is the new result with correct rotations.</p>

<div class="w-full h-auto flex justify-center items-center my-6 mx-0">
    <img class="w-full  md:w-96 aspect-auto" src="/assets/posts/sprite-socket-editor-tool/flip-issue-1.png" />
</div>

<p>Next, we notice that the left/right distinction is not maintained when a sprite is flipped. In the above screenshot it appears that the sword and shield have swapped hands when we flip the sprite. The solution to this problem is simple, we just need to make sure we replace every left socket with its corresponding right socket when the sprite is flipped. When we flip the character sprite, we flip the underlying attachment too.</p>

<div class="w-full h-auto flex justify-center items-center my-6 mx-0">
    <img class="w-full  md:w-96 aspect-auto" src="/assets/posts/sprite-socket-editor-tool/flip-issue-2.png" />
</div>

<p>Unfortunately, despite being “more correct” than the previous screenshots, the above doesn’t look very good. This leads us into our last problem. We need to ensure that the sprite sorting order makes sense. We need to make sure the sprite closest to the camera is rendered in front, and the sprite furthest away is rendered in the back. This is managed by a render sorting order offset associated with each socket at each frame. In the above screenshot we want the shield to appear in the back on the left frame, but we want it to be in the front on the right frame. Fortunately this problem is easy to solve in Unity. We simply create a sorting layer and assign an integer offset relative to the character’s sprite sorting order. We assign -1 to the left hand and +1 to the right hand. This will give us our final result!</p>

<div class="w-full h-auto flex justify-center items-center my-6 mx-0">
    <img class="w-full  md:w-96 aspect-auto" src="/assets/posts/sprite-socket-editor-tool/flip-issue-fixed.png" />
</div>

<h2 id="future-improvements">Future Improvements</h2>
<p>As can be seen clearly in the screenshot, the way the character’s hand interacts/overlaps with the equipped object can be a little awkward. Currently this system does not support more complex overlap types. Using some sort of custom depth buffer could be a potential solution to this problem, but would likely require significant effort from an animator to implement. In our case, since the character is fairly small, these details are not too important.</p>


            <div class="absolute top-4 left-4 transition-opacity duration-500 ease-in-out hover:scale-125 z-30" onclick="history.back()">
                <svg class="w-8 h-8 stroke-gray-400 hover:stroke-gray-100 stroke-2 rotate-90" viewBox="0 0 30 30"><path d="m18.294 16.793-5.293 5.293V1h-1v21.086l-5.295-5.294-.707.707L12.501 24l6.5-6.5-.707-.707z"/></svg>
            </div>
        </div>
	</div>
    <!-- Footer start -->
<div id="footer" class="w-screen bottom-0 z-30 px-4 sm:justify-between h-fit md:h-32 font-mono flex flex-col items-center justify-center bg-gray-200 overflow-hidden">
    <div class="flex flex-col md:flex-row items-center justify-center pb-0 mb-0 mt-4">
        <div class="mr-10 pb-0 mb-0">
            <p>
                <b>Contact me at:</b>
                <br>
                zacharysilliman@gmail.com
                <br>
                607-379-8344
            </p>
        </div>
        <div class="z-45 ml-10 pb-0 mb-0 mt-3 md:mt-0 flex flex-col md:flex-row">
            <a href="/assets/docs/SillimanZachary_Resume.pdf" target="_blank" class="relative flex-none items-center justify-center p-0.5 mb-2 me-2 mr-4 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-purple-600 to-blue-500 group-hover:from-purple-600 group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800">
                <div class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0 flex flex-row">
                    <svg class="w-4 h-4 me-2 mt-[2px]" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="8 8 40 40">
                        <path fill="#90CAF9" d="M40 45L8 45 8 3 30 3 40 13z"></path><path fill="#E1F5FE" d="M38.5 14L29 14 29 4.5z"></path><path fill="#1976D2" d="M16 21H33V23H16zM16 25H29V27H16zM16 29H33V31H16zM16 33H29V35H16z"></path>
                    </svg>
                    Resume
                </div>
            </a>
            <a href="https://github.com/zsilliman" target="_blank" class="relative flex-none items-center justify-center p-0.5 mb-2 me-2 mr-4 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-purple-600 to-blue-500 group-hover:from-purple-600 group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800">
                <div class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0 flex flex-row"></span>
                    <svg class="w-4 h-4 me-2 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z" clip-rule="evenodd"/>
                    </svg>
                    Github
                </div>
            </a>
            <a href="https://www.linkedin.com/in/zach-silliman-9655b624a/" target="_blank" class="relative  flex-none items-center justify-center p-0.5 mb-2 me-2 mr-4 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-purple-600 to-blue-500 group-hover:from-purple-600 group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800">
                <div class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0 flex flex-row"></span>
                    <svg class="w-4 h-4 me-2 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72">
                        <g fill="none" fill-rule="evenodd"><path fill="#007EBB" d="M8 72h56a8 8 0 0 0 8-8V8a8 8 0 0 0-8-8H8a8 8 0 0 0-8 8v56a8 8 0 0 0 8 8Z"/><path fill="#FFF" d="M62 62H51.316V43.802c0-4.99-1.896-7.777-5.845-7.777-4.296 0-6.54 2.901-6.54 7.777V62H28.632V27.333H38.93v4.67s3.096-5.729 10.453-5.729c7.353 0 12.617 4.49 12.617 13.777V62ZM16.35 22.794c-3.508 0-6.35-2.864-6.35-6.397C10 12.864 12.842 10 16.35 10c3.507 0 6.347 2.864 6.347 6.397 0 3.533-2.84 6.397-6.348 6.397ZM11.032 62h10.736V27.333H11.033V62Z"/></g>
                    </svg>
                    LinkedIn
                </div>
            </a>
        </div>
    </div>
    <div class="justify-center mb-2 mt-2">
        <p>
            © 2024 by Zachary Silliman
        </p>
    </div>
</div>
<!-- Footer end --> 
</body>

<!--
 * id: id of the component to add this renderer to
 * background_color: color of the background (0x000000)
 * cube_color: color of the cubes (0x000000)
-->

<script type="module">
import * as THREE from 'https://threejsfundamentals.org/threejs/resources/threejs/r122/build/three.module.js';

var canvas, camera, renderer, scene;

// adjust canvas and camera when window is resized
function onWindowResize() {
  canvas.width  = window.innerWidth;
  canvas.height = window.innerHeight;

  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();

  renderer.setSize( window.innerWidth, window.innerHeight );
}

// move camera around based on cube positions
function OnMouseMoved(event) {
  if (IsOnMobile())
  {
    return;
  }
  var rel_pos_x = event.clientX - window.innerWidth/2;
  var rel_pos_y = event.clientY - window.innerHeight/2;
  camera.position.x = rel_pos_x * 0.0005;
  camera.position.y = -rel_pos_y * 0.0005;
}

function UpdateCube(cube, scroll_y) {
  const ScrollLoopDistance = 800;
  var t = ((window.scrollY % ScrollLoopDistance) + ScrollLoopDistance) % ScrollLoopDistance; // Modded to range [0, ScrollLoopDistance]
  t = t / ScrollLoopDistance; // Normalize to [0,1]

  var u = 2 * (t < 0.5 ? t : 1 - t); // bounce from 0 to 1 back to 0
  const scale_min = new THREE.Vector3( 1, 1, .6 );
  const scale_max = new THREE.Vector3( .5, .5, .3 );
  var s = new THREE.Vector3().lerpVectors(scale_min, scale_max, u);
  cube.scale.set(s.x, s.y, s.z);
  
  const rot_min = new THREE.Vector3( 0, 0, 0 );
  const rot_max = new THREE.Vector3( 0, 0, Math.PI * 0.5 );
  var r = new THREE.Vector3().lerpVectors(rot_min, rot_max, t)
  cube.setRotationFromEuler(new THREE.Euler(r.x, r.y, r.z));
}

function IsOnMobile() {
  let check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};

function OnWindowScrolled() 
{
  scene.traverse(function(obj){
      // for all mesh objects in scene
      if(obj.type === 'Mesh') {
        UpdateCube(obj);
      }
  });
}

// spawn a new cube given the x,y,z coordinate
function CreateCube(x, y, z, color) {
    const geometry = new THREE.BoxGeometry(1, 1, .6);
    //const geometry = new THREE.SphereGeometry(.5, 8, 6)

    const material = new THREE.MeshPhongMaterial({color: color});

    const cube = new THREE.Mesh(geometry, material);
    cube.scale.set(1, 1, 1);
    cube.position.set(x, y, z);
    UpdateCube(cube);
    scene.add(cube);
}

// render frame and request next frame
function render(time) {
  time *= 0.001;  // convert time to seconds
  renderer.render(scene, camera);
  requestAnimationFrame(render);
}

function init(canvas_id, clear_color, cube_color) {
    //Setup Scene
    canvas = document.getElementById(canvas_id);
    console.log(`canvasid=${canvas_id}  clear_color=${clear_color}  cube_color=${cube_color}`);


    renderer = new THREE.WebGLRenderer({ alpha: true });
    renderer.setClearColor(clear_color);

    const fov = 75;
    const aspect = 2;  // the canvas default
    const near = 0.1;
    const far = 100;
    camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
    camera.position.z = 5;

    scene = new THREE.Scene();

    {
        const color = 0xFFFFFF;
        const intensity = 1;
        const light0 = new THREE.DirectionalLight(color, intensity);
        light0.position.set(-1, 2, 4);
        scene.add(light0);
    }
    {
        const color = 0xFFFFFF;
        const intensity = 1;
        const light1 = new THREE.DirectionalLight(color, intensity);
        light1.position.set(1, -2, -4);
        scene.add(light1);
    }

    var x, y;
    for (x=-10; x<=10; x++) {
        for (y=-10; y<=10; y++) {
            if ((x+y)%2 == 0)
                CreateCube(x, y, 0, cube_color);
        }
    }

    canvas.appendChild(renderer.domElement);
    
    window.addEventListener( 'resize', onWindowResize, false );
    window.addEventListener('mousemove', OnMouseMoved, false );
    window.addEventListener('scroll', OnWindowScrolled, false);

    onWindowResize();
    requestAnimationFrame(render);
}

init("post_backdrop", 4872025, 11584689);
</script>
</html>
